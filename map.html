<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="author" content="FF">

    <title>Map</title>

    <link rel="shortcut icon" href="image/pic6.png" />
    <link rel="stylesheet" href="css/plugin/ns-style-growl.css" />
    <link rel="stylesheet" href="css/map.css" />
    <script src="js/plugin/jquery.min.js"></script>
    <script src="js/plugin/modernizr.custom.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=O87UIGqiC4sQ1Zuze5iQiW0t"></script>

</head>

<body>
    <div id="allmap"></div>

    <div class="container"></div>

    <div id="text" class="ns-box ns-effect-scale ns-show text">
        <p>
            中国那么大，他们俩能遇到一起
            <br/>东大那么多人，他们俩还是走到一起了
            <br/>不知道小不点什么感觉
            <br/>FF只觉得觉得很幸运
            <br/>每次都说前所未有的满足感
            <br/>这个话一点都不假
            <br/>几个月来 自己一直强调
            <br/>真的很喜欢小不点！
            <br/>小不点很棒
            <br/>自己都奇怪这感觉持续这么久
            <br/>所以FF一直很认真
            <br/>因为对于FF来说
            <br/>小不点很不一样，很特别
            <br/>FF你要好好珍惜她

        </p>
    </div>
    <script src="js/map.js"></script>
    <script type="text/javascript">
        setTimeout(function () {

            // create the notification
            var notification = new NotificationFx({
                message: '<p>从前...</p>',
                layout: 'growl',
                effect: 'scale',
                type: 'notice',
                ttl: 1300
            });

            // show the notification
            notification.show();

        }, 300);


        function alert_(text) {
            var notification = new NotificationFx({
                message: '<p>' + text + '</p>',
                layout: 'growl',
                effect: 'scale',
                type: 'notice',
                ttl: 1600
            });
            notification.show();
        }

        // 百度地图API功能
        var map = new BMap.Map("allmap"); // 创建Map实例
        map.centerAndZoom("兰州", 5); // 初始化地图,设置中心点坐标和地图级别
        map.addControl(new BMap.MapTypeControl()); //添加地图类型控件
        map.setCurrentCity("兰州"); // 设置地图显示的城市 此项是必须设置的
        map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放
        map.enableInertialDragging(); //开启惯性拖拽
        //        map.setMapStyle({
        //            style: 'googlelite'
        //        });

        var point1 = new BMap.Point(113.130916, 29.380119);
        var marker1 = new BMap.Marker(point1); // 创建标注

        function show_you() {
            alert_("有个女生，她家在这");

            map.centerAndZoom(point1, 18);
            map.addOverlay(marker1); // 将标注添加到地图中
            marker1.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画
            //marker.enableDragging(); // 可拖拽
        }


        var point2 = new BMap.Point(87.575121, 43.881403);
        var marker2 = new BMap.Marker(point2); // 创建标注

        function show_me() {
            alert_("还有个男生，他家在这");


            map.centerAndZoom(point2, 16);
            map.addOverlay(marker2); // 将标注添加到地图中
            marker2.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画
            //marker.enableDragging(); // 可拖拽
        }



        var label1 = new BMap.Label("小不点的家", {
            offset: new BMap.Size(20, -10)
        });
        var label2 = new BMap.Label("FF的家", {
            offset: new BMap.Size(20, -10)
        });

        function show_distance() {

            map.centerAndZoom("西宁", 5);
            var pointA = new BMap.Point(113.130916, 29.380119); // 创建点坐标--You
            var pointB = new BMap.Point(87.575121, 43.881403); // 创建点坐标--Me
            alert_('尽管他们相距很远，足足有：<br/>' + ((map.getDistance(pointA, pointB)) / 1000).toFixed(2) + '公里'); //获取两点距离,保留小数点后两位
            var polyline = new BMap.Polyline([pointA, pointB], {
                strokeColor: "blue",
                strokeWeight: 6,
                strokeOpacity: 0.5
            }); //定义折线
            map.addOverlay(polyline);

            marker1.setLabel(label1);
            marker2.setLabel(label2);
        }



        var point3 = new BMap.Point(123.424998, 41.770978);
        var marker3 = new BMap.Marker(point3); // 创建标注
        function show_gotoshengyang() {

            alert_("但是他们都来到了这个地方：");

            map.centerAndZoom(point3, 12);
            map.addOverlay(marker3); // 将标注添加到地图中
            marker3.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画


        }


        var point4 = new BMap.Point(123.426094, 41.771099);
        //var marker4 = new BMap.Marker(point4); // 创建标注

        function show_school() {

            map.centerAndZoom(point4, 17);
            alert_("在这个小院子里，");
            map.removeOverlay(marker3);

            setTimeout(function () {

                alert_("她住这里");
                var point5 = new BMap.Point(123.419738, 41.77155);
                var marker5 = new BMap.Marker(point5); // 创建标注
                var label5 = new BMap.Label("小不点的寝室", {
                    offset: new BMap.Size(20, -10)
                });
                marker5.setLabel(label5);
                map.addOverlay(marker5); // 将标注添加到地图中
                marker5.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画

            }, 2000);

            setTimeout(function () {

                alert_("他住这里");
                var point6 = new BMap.Point(123.424405, 41.767588);
                var marker6 = new BMap.Marker(point6); // 创建标注
                var label6 = new BMap.Label("FF的寝室", {
                    offset: new BMap.Size(20, -10)
                });
                marker6.setLabel(label6);
                map.addOverlay(marker6); // 将标注添加到地图中
                marker6.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画

            }, 4000);


            //map.addOverlay(marker3); // 将标注添加到地图中
            //marker3.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画


        }

        function show_yigou() {
            alert_("后来他们在一个公司相遇了");
            var point7 = new BMap.Point(123.431416, 41.772279);
            var marker7 = new BMap.Marker(point7); // 创建标注
            map.addOverlay(marker7); // 将标注添加到地图中
            marker7.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画
        }

        function show_text() {
            var text_div = $("#text");

            
            text_div.animate({
                opacity: '0.9',
                top: '90%'
            }, 5000);
            text_div.animate({
                top: '-110%'
            }, 38000);
            setTimeout(function () {;
            }, 2000);
        }



        //添加点击地图监听事件，点击地图后显示当前经纬度
        function showInfo(e) {
            alert_(e.point.lng + ", " + e.point.lat);

            var p = new BMap.Point(e.point.lng, e.point.lat);
            // map.centerAndZoom(p, 15);
            var mark = new BMap.Marker(p); // 创建标注
            map.addOverlay(mark); // 将标注添加到地图中
            mark.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画
            mark.enableDragging(); // 可拖拽

        }
        map.addEventListener("click", showInfo);


        setTimeout(show_you, 2000);
        setTimeout(show_me, 5000);
        setTimeout(show_distance, 7800);
        setTimeout(show_gotoshengyang, 10600);
        setTimeout(show_school, 13600);
        setTimeout(show_yigou, 20600);
        setTimeout(show_text, 20650);



        //浏览器定位
        //        var geolocation = new BMap.Geolocation();
        //        geolocation.getCurrentPosition(function (r) {
        //                if (this.getStatus() == BMAP_STATUS_SUCCESS) {
        //                    var mk = new BMap.Marker(r.point);
        //                    map.addOverlay(mk);
        //                    map.panTo(r.point);
        //                    alert('您的位置：' + r.point.lng + ',' + r.point.lat);
        //                } else {
        //                    alert('failed' + this.getStatus());
        //                }
        //            }, {
        //                enableHighAccuracy: true
        //            })
        //            //关于状态码
        //            //BMAP_STATUS_SUCCESS	检索成功。对应数值“0”。
        //            //BMAP_STATUS_CITY_LIST	城市列表。对应数值“1”。
        //            //BMAP_STATUS_UNKNOWN_LOCATION	位置结果未知。对应数值“2”。
        //            //BMAP_STATUS_UNKNOWN_ROUTE	导航结果未知。对应数值“3”。
        //            //BMAP_STATUS_INVALID_KEY	非法密钥。对应数值“4”。
        //            //BMAP_STATUS_INVALID_REQUEST	非法请求。对应数值“5”。
        //            //BMAP_STATUS_PERMISSION_DENIED	没有权限。对应数值“6”。(自 1.1 新增)
        //            //BMAP_STATUS_SERVICE_UNAVAILABLE	服务不可用。对应数值“7”。(自 1.1 新增)
        //            //BMAP_STATUS_TIMEOUT	超时。对应数值“8”。(自 1.1 新增)
    </script>


</body>

</html>